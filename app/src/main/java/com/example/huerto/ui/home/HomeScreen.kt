package com.example.huerto.ui.homeimport android.app.Applicationimport androidx.compose.foundation.layout.*import androidx.compose.material3.Buttonimport androidx.compose.material3.MaterialThemeimport androidx.compose.material3.Surfaceimport androidx.compose.material3.Textimport androidx.compose.runtime.Composableimport androidx.compose.ui.Alignmentimport androidx.compose.ui.Modifierimport androidx.compose.ui.unit.dpimport androidx.lifecycle.ViewModelimport androidx.lifecycle.ViewModelProviderimport androidx.lifecycle.viewmodel.compose.viewModelimport com.example.huerto.data.local.UserPrefsimport com.example.huerto.data.repository.SessionRepositoryimport kotlinx.coroutines.launch@Composablefun HomeScreen(onLoggedOut: () -> Unit) {    val app = androidx.compose.ui.platform.LocalContext.current.applicationContext as Application    val vm: HomeViewModel = viewModel(factory = HomeVMFactory(app))    Surface(Modifier.fillMaxSize(), color = MaterialTheme.colorScheme.background) {        Box(Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {            Column(                horizontalAlignment = Alignment.CenterHorizontally,                verticalArrangement = Arrangement.spacedBy(12.dp)            ) {                Text("üè° Bienvenido a tu Huerto Digital", style = MaterialTheme.typography.headlineSmall)                Text("Aqu√≠ ir√° tu cat√°logo, riego, recordatorios, etc.", style = MaterialTheme.typography.bodyMedium)                Button(onClick = {                    vm.logout()                    onLoggedOut()                }) {                    Text("Cerrar sesi√≥n")                }            }        }    }}private class HomeViewModel(private val repo: SessionRepository) : ViewModel() {    fun logout() = kotlinx.coroutines.GlobalScope.launch { repo.logout() }}private class HomeVMFactory(private val app: Application) : ViewModelProvider.Factory {    override fun <T : ViewModel> create(modelClass: Class<T>): T {        val repo = SessionRepository(UserPrefs(app))        return HomeViewModel(repo) as T    }}